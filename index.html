<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <title>Upload de Imagem</title>
    <link href="http://www.pr.senac.br/favicon.ico" rel="shortcut icon" type="image/x-icon">
    <link rel="stylesheet" href="./styles.css">
    <script src="https://kit.fontawesome.com/398cd98506.js" crossorigin="anonymous"></script>
</head>
<body>
    <header>
        <img id="logo-senac"
            src="https://th.bing.com/th/id/R.626e6f667294475d22b50f3c2d4b3bf1?rik=WlNGG%2bTdg8H1tA&pid=ImgRaw&r=0">
    </header>
    <form id="uploadForm">
        <input id="imageInput" type="file" accept="image/*" onchange="previewImage(event)">
        <input id="namesInput" type="text" placeholder="Nome ou apelido... ">
        <button id="btnSave" type="button" onclick="uploadImage()">Enviar</button>
    </form>
    <i class="fa-solid fa-cloud-arrow-up icone"></i>
    <div id="caixaDuvida">
        <i class="fa-solid fa-question duvida"></i>
    </div>
    <div id="explicação">
        <i class="fa-solid fa-x fechar"></i>
        <p>
            Aqui vai a explicação da dinamica, detalhada... blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla blabla
        </p>
    </div>
    <script>
        function uploadImage() {
            const formData = new FormData();
            const imageInput = document.getElementById('imageInput');
            if (imageInput.files.length > 0) {
                const file = imageInput.files[0];
                formData.append('image', file);

                fetch('https://fotos-back.vercel.app/upload', {
                    method: 'POST',
                    body: formData,
                })
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('Erro na resposta da rede');
                        }
                        return response.json();
                    })
                    .then(data => {
                        console.log('Sucesso:', data);
                    })
                    .catch((error) => {
                        console.error('Erro:', error);
                    });
            } else {
                alert("Por favor, selecione uma imagem para enviar.");
            }
        }
        function previewImage(event) {
            const input = event.target;
            const reader = new FileReader();

            reader.onload = function () {
                const dataURL = reader.result;
                const imageInputDiv = document.getElementById('imageInput');
                imageInputDiv.style.backgroundImage = `url(${dataURL})`;
                imageInputDiv.style.backgroundSize = 'cover';
                imageInputDiv.style.backgroundPosition = 'center';
            }

            if (input.files && input.files[0]) {
                reader.readAsDataURL(input.files[0]);
            }
        }
    </script>
</body>

</html>